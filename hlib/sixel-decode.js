/*! For license information please see decode.esm.js.LICENSE.txt */
var A={d:(Q,C)=>{for(var I in C)A.o(C,I)&&!A.o(Q,I)&&Object.defineProperty(Q,I,{enumerable:!0,get:C[I]})},o:(A,Q)=>Object.prototype.hasOwnProperty.call(A,Q)},Q={};function C(A,Q,C,I=255){return((255&I)<<24|(255&C)<<16|(255&Q)<<8|255&A)>>>0}function I(A){return[255&A,A>>8&255,A>>16&255,A>>>24]}function g(A,Q,C){return(4278190080|Math.round(C/100*255)<<16|Math.round(Q/100*255)<<8|Math.round(A/100*255))>>>0}A.d(Q,{h:()=>r,wO:()=>D,xq:()=>E,Zl:()=>B,Aj:()=>i,Jx:()=>M,ti:()=>n,gp:()=>I,m1:()=>C}),255===new Uint8Array(new Uint32Array([4278190080]).buffer)[0]&&console.warn("BE platform detected. This version of node-sixel works only on LE properly.");const B=new Uint32Array([g(0,0,0),g(20,20,80),g(80,13,13),g(20,80,20),g(80,20,80),g(20,80,80),g(80,80,20),g(53,53,53),g(26,26,26),g(33,33,60),g(60,26,26),g(33,60,33),g(60,33,60),g(33,60,60),g(60,60,33),g(80,80,80)]),i=new Uint32Array([g(0,0,0),g(13,13,13),g(26,26,26),g(40,40,40),g(6,6,6),g(20,20,20),g(33,33,33),g(46,46,46),g(0,0,0),g(13,13,13),g(26,26,26),g(40,40,40),g(6,6,6),g(20,20,20),g(33,33,33),g(46,46,46)]),E=(()=>{const A=[C(0,0,0),C(205,0,0),C(0,205,0),C(205,205,0),C(0,0,238),C(205,0,205),C(0,250,205),C(229,229,229),C(127,127,127),C(255,0,0),C(0,255,0),C(255,255,0),C(92,92,255),C(255,0,255),C(0,255,255),C(255,255,255)],Q=[0,95,135,175,215,255];for(let I=0;I<6;++I)for(let g=0;g<6;++g)for(let B=0;B<6;++B)A.push(C(Q[I],Q[g],Q[B]));for(let Q=8;Q<=238;Q+=10)A.push(C(Q,Q,Q));return new Uint32Array(A)})(),t=C(0,0,0,255),s=C(255,255,255,255),w=function(A){if("undefined"!=typeof Buffer)return Buffer.from(A,"base64");const Q=atob(A),C=new Uint8Array(Q.length);for(let A=0;A<C.length;++A)C[A]=Q.charCodeAt(A);return C}("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");let e;const a=new Uint32Array;class h{constructor(){this.bandHandler=A=>1,this.modeHandler=A=>1}handle_band(A){return this.bandHandler(A)}mode_parsed(A){return this.modeHandler(A)}}const o={memoryLimit:134217728,sixelColor:s,fillColor:t,palette:B,paletteLimit:4096,truncate:!0};function D(A){const Q=new h,C={env:{handle_band:Q.handle_band.bind(Q),mode_parsed:Q.mode_parsed.bind(Q)}};return WebAssembly.instantiate(e||w,C).then((C=>(e=e||C.module,new r(A,C.instance||C,Q))))}class r{constructor(A,Q,C){if(this._PIXEL_OFFSET=16388,this._canvas=a,this._bandWidths=[],this._maxWidth=0,this._minWidth=16384,this._lastOffset=0,this._currentHeight=0,this._opts=Object.assign({},o,A),this._opts.paletteLimit>4096)throw new Error("SixelDecoderOptions.paletteLimit must not exceed 4096");if(Q)C.bandHandler=this._handle_band.bind(this),C.modeHandler=this._initCanvas.bind(this);else{const A=e||(e=new WebAssembly.Module(w));Q=new WebAssembly.Instance(A,{env:{handle_band:this._handle_band.bind(this),mode_parsed:this._initCanvas.bind(this)}})}this._instance=Q,this._wasm=this._instance.exports,this._chunk=new Uint8Array(this._wasm.memory.buffer,this._wasm.get_chunk_address(),16384),this._states=new Uint32Array(this._wasm.memory.buffer,this._wasm.get_state_address(),12),this._palette=new Uint32Array(this._wasm.memory.buffer,this._wasm.get_palette_address(),4096),this._palette.set(this._opts.palette),this._pSrc=new Uint32Array(this._wasm.memory.buffer,this._wasm.get_p0_address()),this._wasm.init(s,0,this._opts.paletteLimit,0)}get _fillColor(){return this._states[0]}get _truncate(){return this._states[8]}get _rasterWidth(){return this._states[6]}get _rasterHeight(){return this._states[7]}get _width(){return this._states[2]?this._states[2]-4:0}get _height(){return this._states[3]}get _level(){return this._states[9]}get _mode(){return this._states[10]}get _paletteLimit(){return this._states[11]}_initCanvas(A){if(2===A){const A=this.width*this.height;if(A>this._canvas.length){if(this._opts.memoryLimit&&4*A>this._opts.memoryLimit)throw this.release(),new Error("image exceeds memory limit");this._canvas=new Uint32Array(A)}this._maxWidth=this._width}else if(1===A)if(2===this._level){const A=Math.min(this._rasterWidth,16384)*this._rasterHeight;if(A>this._canvas.length){if(this._opts.memoryLimit&&4*A>this._opts.memoryLimit)throw this.release(),new Error("image exceeds memory limit");this._canvas=new Uint32Array(A)}}else this._canvas.length<65536&&(this._canvas=new Uint32Array(65536));return 0}_realloc(A,Q){const C=A+Q;if(C>this._canvas.length){if(this._opts.memoryLimit&&4*C>this._opts.memoryLimit)throw this.release(),new Error("image exceeds memory limit");const A=new Uint32Array(65536*Math.ceil(C/65536));A.set(this._canvas),this._canvas=A}}_handle_band(A){const Q=this._PIXEL_OFFSET;let C=this._lastOffset;if(2===this._mode){let I=this.height-this._currentHeight,g=0;for(;g<6&&I>0;)this._canvas.set(this._pSrc.subarray(Q*g,Q*g+A),C+A*g),g++,I--;this._lastOffset+=A*g,this._currentHeight+=g}else if(1===this._mode){this._realloc(C,6*A),this._maxWidth=Math.max(this._maxWidth,A),this._minWidth=Math.min(this._minWidth,A);for(let I=0;I<6;++I)this._canvas.set(this._pSrc.subarray(Q*I,Q*I+A),C+A*I);this._bandWidths.push(A),this._lastOffset+=6*A,this._currentHeight+=6}return 0}get width(){return 1!==this._mode?this._width:Math.max(this._maxWidth,this._wasm.current_width())}get height(){return 1!==this._mode?this._height:this._wasm.current_width()?6*this._bandWidths.length+6:6*this._bandWidths.length}get palette(){return this._palette.subarray(0,this._paletteLimit)}get memoryUsage(){return this._canvas.byteLength+this._wasm.memory.buffer.byteLength+8*this._bandWidths.length}get properties(){return{width:this.width,height:this.height,mode:this._mode,level:this._level,truncate:!!this._truncate,paletteLimit:this._paletteLimit,fillColor:this._fillColor,memUsage:this.memoryUsage,rasterAttributes:{numerator:this._states[4],denominator:this._states[5],width:this._rasterWidth,height:this._rasterHeight}}}init(A=this._opts.fillColor,Q=this._opts.palette,C=this._opts.paletteLimit,I=this._opts.truncate){this._wasm.init(this._opts.sixelColor,A,C,I?1:0),Q&&this._palette.set(Q.subarray(0,4096)),this._bandWidths.length=0,this._maxWidth=0,this._minWidth=16384,this._lastOffset=0,this._currentHeight=0}decode(A,Q=0,C=A.length){let I=Q;for(;I<C;){const Q=Math.min(C-I,16384);this._chunk.set(A.subarray(I,I+=Q)),this._wasm.decode(0,Q)}}decodeString(A,Q=0,C=A.length){let I=Q;for(;I<C;){const Q=Math.min(C-I,16384);for(let C=0,g=I;C<Q;++C,++g)this._chunk[C]=A.charCodeAt(g);I+=Q,this._wasm.decode(0,Q)}}get data32(){if(0===this._mode||!this.width||!this.height)return a;let A=this._wasm.current_width();if(2===this._mode){let Q=this.height-this._currentHeight;if(Q>0){const C=this._PIXEL_OFFSET;let I=this._lastOffset,g=0;for(;g<6&&Q>0;)this._canvas.set(this._pSrc.subarray(C*g,C*g+A),I+A*g),g++,Q--;Q&&this._canvas.fill(this._fillColor,I+A*g)}return this._canvas.subarray(0,this.width*this.height)}if(1===this._mode){if(this._minWidth===this._maxWidth){let Q=!1;if(A)if(A!==this._minWidth)Q=!0;else{const Q=this._PIXEL_OFFSET;let C=this._lastOffset;this._realloc(C,6*A);for(let I=0;I<6;++I)this._canvas.set(this._pSrc.subarray(Q*I,Q*I+A),C+A*I)}if(!Q)return this._canvas.subarray(0,this.width*this.height)}const Q=new Uint32Array(this.width*this.height);Q.fill(this._fillColor);let C=0,I=0;for(let A=0;A<this._bandWidths.length;++A){const g=this._bandWidths[A];for(let A=0;A<6;++A)Q.set(this._canvas.subarray(I,I+=g),C),C+=this.width}if(A){const I=this._PIXEL_OFFSET;for(let g=0;g<6;++g)Q.set(this._pSrc.subarray(I*g,I*g+A),C+this.width*g)}return Q}return a}release(){this._canvas=a,this._bandWidths.length=0,this._maxWidth=0,this._minWidth=16384,this._wasm.init(s,0,this._opts.paletteLimit,0)}}function M(A,Q){const C=new r(Q);return C.init(),"string"==typeof A?C.decodeString(A):C.decode(A),{width:C.width,height:C.height,data32:C.data32}}async function n(A,Q){const C=await D(Q);return C.init(),"string"==typeof A?C.decodeString(A):C.decode(A),{width:C.width,height:C.height,data32:C.data32}}var N=Q.h,k=Q.wO,J=Q.xq,c=Q.Zl,d=Q.Aj,H=Q.Jx,m=Q.ti,G=Q.gp,_=Q.m1;export{N as Decoder,k as DecoderAsync,J as PALETTE_ANSI_256,c as PALETTE_VT340_COLOR,d as PALETTE_VT340_GREY,H as decode,m as decodeAsync,G as fromRGBA8888,_ as toRGBA8888};
//# sourceMappingURL=decode.esm.js.map